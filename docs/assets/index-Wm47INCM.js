import{j as $,aJ as R,al as T,am as B,as as O,c as C,n as H,V as N,m as p,d as V,r as w,ar as j,P as z,l as v,a1 as g,a4 as E,b,ao as y,a2 as _,aw as d,ag as A,ah as D,at as F,f as J,g as L,ad as M,w as U}from"./index-Vdzw12mx.js";let W=0;function Y(){const o=$(),{name:r="unknown"}=(o==null?void 0:o.type)||{};return`${r}-${++W}`}function Z(o,r){if(!R||!window.IntersectionObserver)return;const c=new IntersectionObserver(e=>{r(e[0].intersectionRatio>0)},{root:document.body}),n=()=>{o.value&&c.observe(o.value)},f=()=>{o.value&&c.unobserve(o.value)};T(f),B(f),O(n)}const[q,G]=C("sticky"),K={zIndex:H,position:N("top"),container:Object,offsetTop:p(0),offsetBottom:p(0)};var Q=V({name:q,props:K,emits:["scroll","change"],setup(o,{emit:r,slots:c}){const n=w(),f=j(n),e=z({fixed:!1,width:0,height:0,transform:0}),l=w(!1),a=v(()=>F(o.position==="top"?o.offsetTop:o.offsetBottom)),S=v(()=>{if(l.value)return;const{fixed:t,height:h,width:s}=e;if(t)return{width:`${s}px`,height:`${h}px`}}),k=v(()=>{if(!e.fixed||l.value)return;const t=J(L(o.zIndex),{width:`${e.width}px`,height:`${e.height}px`,[o.position]:`${a.value}px`});return e.transform&&(t.transform=`translate3d(0, ${e.transform}px, 0)`),t}),I=t=>r("scroll",{scrollTop:t,isFixed:e.fixed}),m=()=>{if(!n.value||y(n))return;const{container:t,position:h}=o,s=d(n),P=M(window);if(e.width=s.width,e.height=s.height,h==="top")if(t){const i=d(t),u=i.bottom-a.value-e.height;e.fixed=a.value>s.top&&i.bottom>0,e.transform=u<0?u:0}else e.fixed=a.value>s.top;else{const{clientHeight:i}=document.documentElement;if(t){const u=d(t),x=i-u.top-a.value-e.height;e.fixed=i-a.value<s.bottom&&i>u.top,e.transform=x<0?-x:0}else e.fixed=i-a.value<s.bottom}I(P)};return g(()=>e.fixed,t=>r("change",t)),E("scroll",m,{target:f,passive:!0}),Z(n,m),g([A,D],()=>{!n.value||y(n)||!e.fixed||(l.value=!0,_(()=>{const t=d(n);e.width=t.width,e.height=t.height,l.value=!1}))}),()=>{var t;return b("div",{ref:n,style:S.value},[b("div",{class:G({fixed:e.fixed&&!l.value}),style:k.value},[(t=c.default)==null?void 0:t.call(c)])])}}});const ee=U(Q);export{ee as S,Z as a,Y as u};
